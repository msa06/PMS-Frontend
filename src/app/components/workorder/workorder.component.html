<mat-drawer-container class="matContainer" autoSize>
    <mat-drawer #drawer class="sidenav" mode="side" opened>
        <app-sidenav></app-sidenav>
    </mat-drawer>
    <div class="sidenav-content">
           
            <mat-toolbar color="primary">
              <mat-toolbar-row class="bg-light text-dark border-bottom ">
                  <button mat-icon-button (click)="drawer.toggle()">
                      <mat-icon>menu</mat-icon>
              </button>
                  <span>Work Order</span>
                  <span class="spacer"></span>
                  <!-- <a href="#" routerLink="/notification" style="text-decoration: none"> -->
                    <mat-icon class="mx-2">notification_important</mat-icon>
                  <!-- </a> -->
                            
                  <button mat-icon-button [matMenuTriggerFor]="menu">
                      <mat-icon class="mx-2">account_circle</mat-icon>
                    </button>
                    <mat-menu #menu="matMenu">
                        <span mat-menu-item>John Doe</span>
                      
                        <a href="#" routerLink="/profile" style="text-decoration: none"><button mat-menu-item>
                            <mat-icon>perm_identity</mat-icon>
                            <span>View Profile</span>
                          </button>
                        </a>
                      <button mat-menu-item>
                        <mat-icon>exit_to_app</mat-icon>
                        <span>Logout</span>
                      </button>
                    </mat-menu>
              </mat-toolbar-row>
          </mat-toolbar>
        <div class="container">
           
          <button class="float-right my-3 mx-0 btn btn-danger" data-toggle="modal" data-target="#createModal">Create Work Order</button>

          <table mat-table [dataSource]="dataSource" matSort class="mat-elevation-z4">


              <!-- due Column -->
              <ng-container matColumnDef="due">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Due </th>
                <td mat-cell *matCellDef="let element"> {{element.due| date:'dd/MM/yyyy'}} </td>
              </ng-container>
            
              <!-- woid Column -->
              <ng-container matColumnDef="id">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> WO# </th>
                <td mat-cell *matCellDef="let element"> {{element.id}} </td>
              </ng-container>
            
              <!-- status Column -->
              <ng-container matColumnDef="status">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Status </th>
                <td mat-cell *matCellDef="let element"> {{element.status}} </td>
              </ng-container>
            
              <!-- title Column -->
              <ng-container matColumnDef="title">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Work Order Title </th>
                <td mat-cell *matCellDef="let element"> {{element.title}} </td>
              </ng-container>
              <!-- priority Column -->
              <ng-container matColumnDef="priority">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Priority </th>
                <td mat-cell *matCellDef="let element"> {{element.priority}} </td>
              </ng-container>
            
              <!-- assignee Column -->
              <ng-container matColumnDef="assignee">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Assignee </th>
                <td mat-cell *matCellDef="let element"> {{element.assignee}} </td>
              </ng-container>
            
              <!-- location Column -->
              <ng-container matColumnDef="location">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Location </th>
                <td mat-cell *matCellDef="let element"> {{element.location}} </td>
              </ng-container>
            
              <!-- assets Column -->
              <ng-container matColumnDef="assets">
                <th mat-header-cell *matHeaderCellDef mat-sort-header>Assets </th>
                <td mat-cell *matCellDef="let element"> {{element.assets}} </td>
              </ng-container>
            
            
              <!-- lastupdated Column -->
              <ng-container matColumnDef="lastupdated">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Last Updated </th>
                <td mat-cell *matCellDef="let element"> {{element.lastupdated| date:'dd/MM/yyyy'}} </td>
              </ng-container>
              <!-- createdon Column -->
              <ng-container matColumnDef="createdon">
                <th mat-header-cell *matHeaderCellDef mat-sort-header> Created On </th>
                <td mat-cell *matCellDef="let element"> {{element.createdon| date:'dd/MM/yyyy'}} </td>
              </ng-container>
            
              <!-- Edit Column -->
            
              <tr mat-header-row *matHeaderRowDef="displayedColumns" class="table-header"></tr>
              <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click)="selectRow(row)"  data-toggle="modal" data-target="#editModal"></tr>
            </table>
            
        </div>
        
    </div>
  </mat-drawer-container>

  <!-- CreateModal -->
  <div class="modal" id="createModal">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header bg-primary text-white">
            <h5 class="modal-title">Create Work Orders</h5>
            <button class="close" data-dismiss="modal">&times;</button>
          </div>
          <div class="modal-body">
                <div class="example-container">
                <form (ngSubmit)="onSubmit()">
                  <mat-form-field>
                    <input matInput type="text" placeholder="Work Order Title" [formControl]="titleCtrl" required="wotitle">
                    <mat-error align="end" *ngIf="titleCtrl.hasError('required')">Title is required</mat-error>
                  </mat-form-field>
                  
                  <mat-form-field>
                    <textarea matInput placeholder="Description" [formControl]="despCtrl" required></textarea>
                    <mat-error align="end" *ngIf="despCtrl.hasError('required')">Description is must!</mat-error>
                  </mat-form-field>
    
                  <div class="form-group">
                    <button mat-stroked-button (click)="fileInput.click()">Upload Image</button>
                    <input hidden type="file" #fileInput>
                  </div>
    
                  <mat-form-field>
                    <input matInput [matDatepicker]="myDatepicker" [min]="minDate" [formControl]="dateCtrl"
                      placeholder="Due Date / Work Scheduled On">
                    <mat-datepicker-toggle matSuffix [for]="myDatepicker"></mat-datepicker-toggle>
                    <mat-datepicker #myDatepicker></mat-datepicker>
                    <mat-error align="end" *ngIf="dateCtrl.hasError('required')">A valid date dd/mm/yyyy is required
                    </mat-error>
                  </mat-form-field>
    
                  <!-- <mat-form-field>
                    <mat-select placeholder="Recurring Schedule" [(value)]="recursivevalue">
                      <mat-option *ngFor="let schedule of schedules" value="{{schedule}}">{{schedule}}</mat-option>
    
                    </mat-select>
                  </mat-form-field> -->
    
                  <!-- <mat-form-field>
                    <input matInput type="number" placeholder="Estimated Duration(Hours)">
                  </mat-form-field> -->
    
                  <mat-button-toggle-group name="Priority" [(value)]="priorityvalue">
                    <mat-button-toggle value="0">None</mat-button-toggle>
                    <mat-button-toggle value="1">Low</mat-button-toggle>
                    <mat-button-toggle value="2">Medium</mat-button-toggle>
                    <mat-button-toggle value="3">High</mat-button-toggle>
                  </mat-button-toggle-group>
    
                  <mat-form-field>
                    <mat-select placeholder="Category">
                      <mat-option value="{{category}}" *ngFor="let category of categories">{{category}}</mat-option>
                    </mat-select>
                  </mat-form-field>
    
                  <mat-form-field>
                    <mat-select placeholder="Assigned To">
                      <mat-option value="option" *ngFor="let assign of assignies">{{assign}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <!-- <mat-form-field>
                    <mat-select placeholder="Additional Workers">
                      <mat-option value="option" *ngFor="let worker of workers">{{worker}}</mat-option>
                    </mat-select>
                  </mat-form-field> -->
                  <mat-form-field>
                    <mat-select placeholder="Location">
                      <mat-option value="option" *ngFor="let location of locations">{{location}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <mat-form-field>
                    <mat-select placeholder="Assets">
                      <mat-option value="option" *ngFor="let asset of assets">{{assets}}</mat-option>
                    </mat-select>
                  </mat-form-field>
                  <!-- <mat-form-field>
                    <mat-select placeholder="Purchase Order">
                      <mat-option value="option" *ngFor="let order of orders">{{orders}}</mat-option>
                    </mat-select>
                  </mat-form-field> -->
    
    
    
                </form>      
            </div>
          </div>
          <div class="modal-footer">
            <button (click)="onSubmit()" class="btn btn-primary" data-dismiss="modal">Create Work Order</button>
          </div>
          
        </div>
      </div>
    </div>

    <!-- EditModal -->
  <div class="modal" id="editModal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header bg-primary text-white">
          <h5 class="modal-title">Edit Work Orders</h5>
          <button class="close" data-dismiss="modal">&times;</button>
        </div>
        <div class="modal-body">
          <div class="container">
            <p>Last Update: <span>{{data.lastupdated | date:'MMMM dd yyyy'}}</span>
              <span class="float-right text-muted">#{{data.id}}</span>
            </p>
            <h3>{{data.title}}</h3>
            <p class="lead">{{data.description}}</p>
        
            <mat-form-field>
            <mat-select [(ngModel)]="status" class="btn btn-primary">
              <mat-option value="0" selected>Open</mat-option>
              <mat-option value="1">In Progress</mat-option>
              <mat-option value="2">Hold</mat-option>
              <mat-option value="3">Closed</mat-option>
            </mat-select>
          </mat-form-field>
            <br>
        
            <p class="text-muted">Due Date:{{data.due | date:'MMMM dd yyyy'}} </p>
            <p class="text-muted">Created:{{data.createdeon | date:'MMMM dd yyyy'}} </p>
        
        
        
        
          </div> 
        </div>
        <div class="modal-footer">
          <button (click)="onEdit(data)" class="btn btn-primary" data-dismiss="modal">Edit Work Order</button>
        </div>
        
      </div>
    </div>
  </div>
  


  
  